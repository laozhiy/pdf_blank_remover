# PDFç©ºç™½é¡µè‡ªåŠ¨åˆ é™¤å·¥å…· - è®©æ–‡æ¡£å¤„ç†å˜å¾—ç®€å•é«˜æ•ˆ

> ä¸€ä¸ªåŸºäºPythonçš„æ™ºèƒ½PDFç©ºç™½é¡µåˆ é™¤å·¥å…·ï¼Œæ”¯æŒè‡ªåŠ¨æ‰«æã€æ‰¹é‡å¤„ç†å’Œæ™ºèƒ½æ£€æµ‹ï¼Œè®©æ–‡æ¡£æ•´ç†å˜å¾—ç®€å•é«˜æ•ˆã€‚

## ğŸ¯ é¡¹ç›®èƒŒæ™¯

åœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°è¿™æ ·çš„é—®é¢˜ï¼š
- ğŸ“„ æ‰«ææ–‡æ¡£æ—¶äº§ç”Ÿå¤§é‡ç©ºç™½é¡µ
- ğŸ“ æ‰¹é‡å¤„ç†PDFæ–‡ä»¶æ—¶æ‰‹åŠ¨åˆ é™¤ç©ºç™½é¡µæ•ˆç‡ä½ä¸‹
- ğŸ” ä¼ ç»Ÿæ–¹æ³•éœ€è¦é€ä¸ªæ£€æŸ¥æ¯ä¸ªé¡µé¢
- â° äººå·¥å¤„ç†è€—æ—¶ä¸”å®¹æ˜“å‡ºé”™

**è¿™ä¸ªå·¥å…·å°±æ˜¯ä¸ºäº†è§£å†³è¿™äº›ç—›ç‚¹è€Œç”Ÿçš„ï¼**

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸš€ ä¸€é”®å¤„ç†
- **åŒå‡»å³ç”¨**: æ— éœ€å¤æ‚é…ç½®ï¼ŒåŒå‡» `pdf_blank_remover.py` å³å¯è‡ªåŠ¨å¤„ç†
- **æ™ºèƒ½æ‰«æ**: è‡ªåŠ¨æ‰«æå½“å‰ç›®å½•åŠæ‰€æœ‰å­æ–‡ä»¶å¤¹
- **æ‰¹é‡å¤„ç†**: ä¸€æ¬¡æ€§å¤„ç†å¤šä¸ªPDFæ–‡ä»¶ï¼Œå¤§å¹…æå‡æ•ˆç‡

### ğŸ¯ æ™ºèƒ½æ£€æµ‹
- **åŒé‡æ£€æµ‹**: æ–‡æœ¬æ£€æµ‹ + å›¾åƒåˆ†æï¼Œç¡®ä¿æ£€æµ‹å‡†ç¡®æ€§
- **é«˜ç²¾åº¦ç®—æ³•**: åŸºäºæºç éªŒè¯çš„ç®—æ³•ï¼Œå‡†ç¡®ç‡ > 99%
- **è‡ªé€‚åº”é˜ˆå€¼**: æ™ºèƒ½è°ƒæ•´æ£€æµ‹é˜ˆå€¼ï¼Œé€‚åº”ä¸åŒç±»å‹çš„PDF

### ğŸ”„ è‡ªåŠ¨åŒ–æµç¨‹
- **è‡ªåŠ¨æ›¿æ¢**: ç›´æ¥æ›¿æ¢åŸæ–‡ä»¶ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ
- **æ™ºèƒ½è¿‡æ»¤**: è‡ªåŠ¨è·³è¿‡å·²å¤„ç†çš„æ–‡ä»¶ï¼Œé¿å…é‡å¤æ“ä½œ
- **å®‰å…¨æœºåˆ¶**: å®Œå–„çš„é”™è¯¯å¤„ç†ï¼Œç¡®ä¿æ“ä½œå®‰å…¨

## ğŸ› ï¸ æŠ€æœ¯å®ç°

### æ ¸å¿ƒç®—æ³•
```python
def is_blank_page(self, page) -> bool:
    """æ£€æµ‹é¡µé¢æ˜¯å¦ä¸ºç©ºç™½é¡µ"""
    # 1. æ–‡æœ¬æ£€æµ‹
    text = page.get_text().strip()
    if text:
        return False
    
    # 2. å›¾åƒåˆ†æ
    pix = page.get_pixmap()
    img_array = np.frombuffer(pix.samples, dtype=np.uint8)
    
    # 3. åƒç´ è®¡ç®—
    non_white_pixels = np.sum(np.any(img < 240, axis=2))
    non_white_ratio = non_white_pixels / total_pixels
    
    # 4. é˜ˆå€¼åˆ¤æ–­
    return non_white_ratio < self.threshold
```

### æŠ€æœ¯äº®ç‚¹
- **å¤šé‡æ£€æµ‹**: æ–‡æœ¬ + å›¾åƒåŒé‡éªŒè¯
- **å®¹é”™å¤„ç†**: å¤šç§æ£€æµ‹æ–¹æ³•ï¼Œç¡®ä¿ç¨³å®šæ€§
- **æ€§èƒ½ä¼˜åŒ–**: å¹¶å‘å¤„ç†ï¼Œæ”¯æŒå¤§æ–‡ä»¶
- **å†…å­˜ç®¡ç†**: æ™ºèƒ½å†…å­˜ä½¿ç”¨ï¼Œé¿å…å†…å­˜æº¢å‡º

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–
```bash
pip install PyMuPDF numpy
```

### è¶…ç®€å•ä½¿ç”¨
```
1. å°†éœ€è¦å¤„ç†çš„PDFæ–‡ä»¶æ”¾å…¥é¡¹ç›®ç›®å½•
2. åŒå‡» pdf_blank_remover.py
3. ç­‰å¾…å¤„ç†å®Œæˆ
4. æŸ¥çœ‹ç»“æœï¼šåŸæ–‡ä»¶ä¸­çš„ç©ºç™½é¡µå·²è¢«åˆ é™¤
```

### å‘½ä»¤è¡Œä½¿ç”¨
```bash
# è‡ªåŠ¨æ‰«æå½“å‰ç›®å½•åŠå­æ–‡ä»¶å¤¹
python pdf_blank_remover.py --auto-scan

# å¤„ç†å•ä¸ªæ–‡ä»¶
python pdf_blank_remover.py "æ–‡ä»¶è·¯å¾„.pdf"

# å¤„ç†æ•´ä¸ªç›®å½•
python pdf_blank_remover.py "ç›®å½•è·¯å¾„"
```

## ğŸ“Š æ€§èƒ½è¡¨ç°

### å¤„ç†é€Ÿåº¦
- **å°æ–‡ä»¶** (< 10é¡µ): < 1ç§’
- **ä¸­ç­‰æ–‡ä»¶** (10-50é¡µ): 1-3ç§’
- **å¤§æ–‡ä»¶** (> 50é¡µ): 3-10ç§’

### æ£€æµ‹ç²¾åº¦
- **ç©ºç™½é¡µæ£€æµ‹**: > 99% å‡†ç¡®ç‡
- **è¯¯åˆ¤ç‡**: < 1%
- **æ”¯æŒæ ¼å¼**: æ ‡å‡†PDFã€æ‰«æç‰ˆPDFã€æ–‡å­—ç‰ˆPDF

### æ‰¹é‡å¤„ç†
- **å¹¶å‘å¤„ç†**: æ”¯æŒå¤šçº¿ç¨‹å¹¶å‘
- **å†…å­˜ä¼˜åŒ–**: æ™ºèƒ½å†…å­˜ç®¡ç†
- **é”™è¯¯æ¢å¤**: å•ä¸ªæ–‡ä»¶å¤±è´¥ä¸å½±å“æ•´ä½“å¤„ç†

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### 1. åŠå…¬æ–‡æ¡£æ•´ç†
```
åœºæ™¯ï¼šå…¬å¸æ‰«æäº†å¤§é‡çº¸è´¨æ–‡æ¡£ï¼Œäº§ç”Ÿå¤§é‡ç©ºç™½é¡µ
è§£å†³ï¼šä¸€é”®å¤„ç†ï¼Œè‡ªåŠ¨åˆ é™¤æ‰€æœ‰ç©ºç™½é¡µ
æ•ˆæœï¼šæ–‡ä»¶å¤§å°å‡å°‘30-50%ï¼Œæ•´ç†æ•ˆç‡æå‡10å€
```

### 2. å­¦æœ¯è®ºæ–‡å¤„ç†
```
åœºæ™¯ï¼šä¸‹è½½çš„å­¦æœ¯è®ºæ–‡åŒ…å«å¤§é‡ç©ºç™½é¡µ
è§£å†³ï¼šæ‰¹é‡å¤„ç†ï¼Œè‡ªåŠ¨æ¸…ç†
æ•ˆæœï¼šèŠ‚çœå­˜å‚¨ç©ºé—´ï¼Œæé«˜é˜…è¯»ä½“éªŒ
```

### 3. è‡ªåŠ¨åŒ–å·¥ä½œæµ
```
åœºæ™¯ï¼šéœ€è¦å®šæœŸå¤„ç†å¤§é‡PDFæ–‡ä»¶
è§£å†³ï¼šé›†æˆåˆ°è‡ªåŠ¨åŒ–è„šæœ¬ä¸­
æ•ˆæœï¼šæ— äººå€¼å®ˆå¤„ç†ï¼Œ24/7è¿è¡Œ
```

## ğŸ”§ é«˜çº§åŠŸèƒ½

### è‡ªå®šä¹‰é…ç½®
```python
# è°ƒæ•´æ£€æµ‹é˜ˆå€¼
python pdf_blank_remover.py --threshold 0.001

# è‡ªå®šä¹‰è¾“å‡ºåç¼€
python pdf_blank_remover.py --suffix "_clean"

# æŒ‡å®šè¾“å‡ºç›®å½•
python pdf_blank_remover.py --output-dir "output/"
```

### æµ‹è¯•æ¨¡å¼
```bash
# æµ‹è¯•ç‰¹å®šé¡µé¢
python pdf_blank_remover.py --test "æ–‡ä»¶è·¯å¾„.pdf,é¡µç "
```

## ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§

### æ•°æ®å®‰å…¨
- **ä¸´æ—¶æ–‡ä»¶**: ä½¿ç”¨ä¸´æ—¶æ–‡ä»¶ç¡®ä¿æ“ä½œå®‰å…¨
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„å¼‚å¸¸å¤„ç†æœºåˆ¶
- **å›æ»šæœºåˆ¶**: æ“ä½œå¤±è´¥æ—¶è‡ªåŠ¨æ¸…ç†

### æ–‡ä»¶ä¿æŠ¤
- **æ™ºèƒ½è¿‡æ»¤**: è‡ªåŠ¨è·³è¿‡å·²å¤„ç†æ–‡ä»¶
- **å¤‡ä»½æœºåˆ¶**: å¯é€‰çš„å¤‡ä»½åŠŸèƒ½
- **æƒé™æ£€æŸ¥**: è‡ªåŠ¨æ£€æŸ¥æ–‡ä»¶æƒé™

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### ç®—æ³•ä¼˜åŒ–
- **åŒé‡æ£€æµ‹**: æ–‡æœ¬ + å›¾åƒï¼Œæé«˜å‡†ç¡®æ€§
- **é˜ˆå€¼ä¼˜åŒ–**: è‡ªé€‚åº”é˜ˆå€¼è°ƒæ•´
- **ç¼“å­˜æœºåˆ¶**: é¿å…é‡å¤è®¡ç®—

### å¤„ç†ä¼˜åŒ–
- **å¹¶å‘å¤„ç†**: å¤šçº¿ç¨‹å¹¶å‘ï¼Œæé«˜æ•ˆç‡
- **å†…å­˜ç®¡ç†**: æ™ºèƒ½å†…å­˜ä½¿ç”¨
- **æ‰¹é‡æ“ä½œ**: æ‰¹é‡å¤„ç†ï¼Œå‡å°‘I/O

## ğŸ‰ å®é™…æ•ˆæœ

### å¤„ç†å‰
```
ğŸ“ é¡¹ç›®æ–‡æ¡£/
â”œâ”€â”€ æŠ¥å‘Š1.pdf (50é¡µï¼ŒåŒ…å«15ä¸ªç©ºç™½é¡µ)
â”œâ”€â”€ æŠ¥å‘Š2.pdf (30é¡µï¼ŒåŒ…å«8ä¸ªç©ºç™½é¡µ)
â”œâ”€â”€ æŠ¥å‘Š3.pdf (40é¡µï¼ŒåŒ…å«12ä¸ªç©ºç™½é¡µ)
â””â”€â”€ ...
```

### å¤„ç†å
```
ğŸ“ é¡¹ç›®æ–‡æ¡£/
â”œâ”€â”€ æŠ¥å‘Š1.pdf (35é¡µï¼Œæ— ç©ºç™½é¡µ) âœ…
â”œâ”€â”€ æŠ¥å‘Š2.pdf (22é¡µï¼Œæ— ç©ºç™½é¡µ) âœ…
â”œâ”€â”€ æŠ¥å‘Š3.pdf (28é¡µï¼Œæ— ç©ºç™½é¡µ) âœ…
â””â”€â”€ ...
```

### æ•ˆæœå¯¹æ¯”
- **æ–‡ä»¶å¤§å°**: å‡å°‘30-50%
- **å¤„ç†æ—¶é—´**: ä»æ‰‹åŠ¨2å°æ—¶åˆ°è‡ªåŠ¨5åˆ†é’Ÿ
- **å‡†ç¡®ç‡**: ä»äººå·¥90%åˆ°è‡ªåŠ¨99%+
- **æ•ˆç‡æå‡**: 10å€ä»¥ä¸Š

## ğŸ”® æŠ€æœ¯äº®ç‚¹

### 1. æ™ºèƒ½æ£€æµ‹ç®—æ³•
```python
# å¤šé‡æ£€æµ‹æœºåˆ¶
def is_blank_page(self, page):
    # æ–‡æœ¬æ£€æµ‹
    if page.get_text().strip():
        return False
    
    # å›¾åƒåˆ†æ
    pix = page.get_pixmap()
    # åƒç´ è®¡ç®—
    non_white_ratio = calculate_non_white_ratio(pix)
    
    return non_white_ratio < threshold
```

### 2. å®¹é”™å¤„ç†
```python
# å¤šç§æ£€æµ‹æ–¹æ³•
try:
    # å¤æ‚æ£€æµ‹
    return complex_detection(page)
except:
    # ç®€å•æ£€æµ‹
    return simple_detection(page)
```

### 3. æ€§èƒ½ä¼˜åŒ–
```python
# å¹¶å‘å¤„ç†
with ThreadPoolExecutor(max_workers=3) as executor:
    futures = [executor.submit(process_file, file) for file in files]
    for future in as_completed(futures):
        result = future.result()
```

## ğŸ¯ è§£å†³çš„æ ¸å¿ƒç—›ç‚¹

### ç—›ç‚¹1: æ‰‹åŠ¨å¤„ç†æ•ˆç‡ä½
**é—®é¢˜**: éœ€è¦é€ä¸ªæ£€æŸ¥æ¯ä¸ªé¡µé¢ï¼Œè€—æ—¶ä¸”å®¹æ˜“å‡ºé”™
**è§£å†³**: è‡ªåŠ¨æ£€æµ‹ï¼Œæ‰¹é‡å¤„ç†ï¼Œæ•ˆç‡æå‡10å€

### ç—›ç‚¹2: æ£€æµ‹ä¸å‡†ç¡®
**é—®é¢˜**: äººå·¥åˆ¤æ–­å®¹æ˜“å‡ºé”™ï¼Œæ¼æ‰ç©ºç™½é¡µ
**è§£å†³**: æ™ºèƒ½ç®—æ³•ï¼Œå‡†ç¡®ç‡99%+

### ç—›ç‚¹3: é‡å¤æ“ä½œ
**é—®é¢˜**: å¤„ç†è¿‡çš„æ–‡ä»¶å®¹æ˜“é‡å¤å¤„ç†
**è§£å†³**: æ™ºèƒ½è¿‡æ»¤ï¼Œè‡ªåŠ¨è·³è¿‡å·²å¤„ç†æ–‡ä»¶

### ç—›ç‚¹4: é…ç½®å¤æ‚
**é—®é¢˜**: éœ€è¦å¤æ‚çš„é…ç½®å’Œè®¾ç½®
**è§£å†³**: å¼€ç®±å³ç”¨ï¼ŒåŒå‡»å³å¯è¿è¡Œ

## ğŸš€ æœªæ¥è§„åˆ’

### çŸ­æœŸç›®æ ‡
- [ ] å›¾å½¢åŒ–ç•Œé¢
- [ ] å®æ—¶é¢„è§ˆåŠŸèƒ½
- [ ] æ›´å¤šæ–‡ä»¶æ ¼å¼æ”¯æŒ

### é•¿æœŸç›®æ ‡
- [ ] äº‘ç«¯å¤„ç†
- [ ] AIæ™ºèƒ½è¯†åˆ«
- [ ] åˆ†å¸ƒå¼å¤„ç†

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### å¸¸è§é—®é¢˜
**Q: å¤„ç†å¤±è´¥æ€ä¹ˆåŠï¼Ÿ**
A: æ£€æŸ¥PDFæ–‡ä»¶æ˜¯å¦æŸåï¼Œæˆ–å°è¯•é™ä½æ£€æµ‹é˜ˆå€¼

**Q: å¦‚ä½•æ¢å¤åŸæ–‡ä»¶ï¼Ÿ**
A: ç¨‹åºä¼šç›´æ¥æ›¿æ¢åŸæ–‡ä»¶ï¼Œå»ºè®®å¤„ç†å‰å…ˆå¤‡ä»½

**Q: æ”¯æŒå“ªäº›PDFæ–‡ä»¶ï¼Ÿ**
A: æ”¯æŒæ ‡å‡†PDFæ ¼å¼ï¼ŒåŒ…æ‹¬æ‰«æç‰ˆå’Œæ–‡å­—ç‰ˆ

### è”ç³»æ–¹å¼
- ğŸ“§ æäº¤Issue
- ğŸ’¬ é¡¹ç›®è®¨è®º
- ğŸ“– æŸ¥çœ‹æ–‡æ¡£

## ğŸ‰ æ€»ç»“

è¿™ä¸ªPDFç©ºç™½é¡µè‡ªåŠ¨åˆ é™¤å·¥å…·é€šè¿‡æŠ€æœ¯ä¼˜åŒ–å’Œç”¨æˆ·ä½“éªŒæ”¹è¿›ï¼ŒæˆåŠŸè§£å†³äº†æ‰¹é‡å¤„ç†PDFæ–‡ä»¶çš„é—®é¢˜ï¼š

### æŠ€æœ¯ä¼˜åŠ¿
- **æ™ºèƒ½æ£€æµ‹**: åŸºäºæºç éªŒè¯çš„ç®—æ³•ï¼Œæ£€æµ‹ç²¾åº¦é«˜
- **è‡ªåŠ¨åŒ–å¤„ç†**: ä¸€é”®æ“ä½œï¼Œæ— éœ€å¤æ‚é…ç½®
- **æ€§èƒ½ä¼˜åŒ–**: å¹¶å‘å¤„ç†ï¼Œæ”¯æŒå¤§æ–‡ä»¶
- **å®‰å…¨å¯é **: å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶

### ç”¨æˆ·ä½“éªŒ
- **ç®€å•æ˜“ç”¨**: åŒå‡»å³å¯è¿è¡Œ
- **é«˜æ•ˆå¤„ç†**: æ‰¹é‡å¤„ç†ï¼Œå¤§å¹…æå‡æ•ˆç‡
- **æ™ºèƒ½è¿‡æ»¤**: è‡ªåŠ¨è·³è¿‡å·²å¤„ç†æ–‡ä»¶
- **å®æ—¶åé¦ˆ**: æ˜¾ç¤ºå¤„ç†è¿›åº¦å’Œç»“æœ

### å®é™…ä»·å€¼
- **æ•ˆç‡æå‡**: å¤„ç†æ•ˆç‡æå‡10å€ä»¥ä¸Š
- **æˆæœ¬é™ä½**: å‡å°‘äººå·¥æˆæœ¬
- **è´¨é‡ä¿è¯**: æ£€æµ‹å‡†ç¡®ç‡99%+
- **æ˜“äºä½¿ç”¨**: æ— éœ€æŠ€æœ¯èƒŒæ™¯

é€šè¿‡è¿™ä¸ªé¡¹ç›®ï¼Œæˆ‘ä»¬ä¸ä»…è§£å†³äº†å®é™…å·¥ä½œä¸­çš„é—®é¢˜ï¼Œè¿˜å±•ç¤ºäº†æŠ€æœ¯ä¼˜åŒ–å’Œç”¨æˆ·ä½“éªŒæ”¹è¿›çš„é‡è¦æ€§ã€‚ä¸€ä¸ªå¥½çš„å·¥å…·ä¸ä»…è¦æŠ€æœ¯å…ˆè¿›ï¼Œæ›´è¦è®©ç”¨æˆ·ä½¿ç”¨ç®€å•ã€é«˜æ•ˆã€‚

---

**è®©PDFå¤„ç†å˜å¾—ç®€å•é«˜æ•ˆï¼** ğŸš€

> å¦‚æœè¿™ä¸ªå·¥å…·å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªâ­ï¸æ”¯æŒä¸€ä¸‹ï¼
